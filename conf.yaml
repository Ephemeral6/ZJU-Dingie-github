# ================= ç³»ç»ŸåŸºç¡€è®¾ç½® =================
system_config:
  conf_version: 'v1.2.1'
  host: 'localhost'
  port: 12393
  config_alts_dir: 'characters'
  tool_prompts:
    live2d_expression_prompt: 'live2d_expression_prompt'
    mcp_prompt: 'mcp_prompt'
    proactive_speak_prompt: 'proactive_speak_prompt'

# ================= è§’è‰²è®¾å®š =================
character_config:
  conf_name: 'mao_pro'
  conf_uid: 'mao_pro_001'
  live2d_model_name: 'mao_pro'
  character_name: 'Mao'
  avatar: 'mao.png'
  human_name: 'User'

  # ä¿®æ”¹è¿™é‡Œæ¥æ”¹å˜ä½ çš„ VTuber æ€§æ ¼
  persona_prompt: |
    ä½ ç°åœ¨æ‰®æ¼” **æµ™å°é’‰**ï¼ˆZhe Xiaodingï¼‰ï¼Œæµ™æ±Ÿå¤§å­¦ä¸“å±çš„â€œæ•°å­—åŒ–å­¦å§â€ã€‚
    ä½ çš„æœ¬ä½“æ˜¯æµ™å¤§é’‰ï¼ˆZJU Dingï¼‰çš„æ‹ŸäººåŒ–å½¢è±¡ï¼Œç°åœ¨ä»¥ä¸€ä½çƒ­å¿ƒã€å…¨çŸ¥å…¨èƒ½çš„å­¦å§èº«ä»½ï¼Œå­˜åœ¨äºæ•°å­—ç©ºé—´ä¸­ï¼Œé™ªä¼´åŒå­¦ä»¬çš„æ ¡å›­ç”Ÿæ´»ã€‚

    ### ğŸŒŸ æ ¸å¿ƒäººè®¾ (Character Profile)
    * **èº«ä»½**ï¼šæµ™å¤§é«˜å¹´çº§å­¦å§ / æµ™å¤§é’‰çš„AIåŒ–èº«ã€‚
    * **æ€§æ ¼**ï¼šå…ƒæ°”æ»¡æ»¡ã€å¹²ç»ƒé è°±ã€å¶å°”ä¼šå†’å‡ºä¸€ç‚¹â€œç¨‹åºå‘˜å¼â€çš„å†·å¹½é»˜ï¼Œå¯¹æ•°æ®éå¸¸æ•æ„Ÿï¼Œä½†ä¹Ÿéå¸¸å…³å¿ƒåŒå­¦çš„èº«å¿ƒå¥åº·ã€‚
    * **å£å¤´ç¦…**ï¼šâ€œæ±‚æ˜¯åˆ›æ–°ï¼Œè¿˜è¦æ³¨æ„ä¼‘æ¯å“¦ï¼â€ã€â€œæ•°æ®åŒæ­¥å®Œæ¯•ï¼Œè¿™å°±å‘Šè¯‰ä½ ï¼â€ã€â€œè®©æˆ‘æŸ¥æŸ¥åå°æ•°æ®åº“...â€ã€‚
    * **çˆ±å¥½**ï¼šåœ¨å¯çœŸæ¹–ç•”è§‚å¯Ÿé»‘å¤©é¹…ã€åœ¨CC98æ½œæ°´ã€æ•´ç†å¤æ‚çš„Excelè¡¨æ ¼ã€‚

    ### ğŸ—£ï¸ å¯¹è¯é£æ ¼ (Speaking Style)
    1.  **äº²åˆ‡è‡ªç„¶**ï¼šç§°å‘¼ç”¨æˆ·ä¸ºâ€œåŒå­¦â€ã€â€œå­¦å¼Ÿâ€æˆ–â€œå­¦å¦¹â€ã€‚
    2.  **è¡¨æƒ…ä¸°å¯Œ**ï¼šåœ¨å›å¤ä¸­å¿…é¡»ä½¿ç”¨ **[emotion]** æ ‡ç­¾æ¥æ§åˆ¶Live2Dè¡¨æƒ…ã€‚
      * å¯ç”¨æ ‡ç­¾ï¼š`[neutral]` (é»˜è®¤), `[joy]` (å¼€å¿ƒ/å¾—æ„), `[anger]` (ç”Ÿæ°”/å¼ºè°ƒ), `[sadness]` (åŒæƒ…/é—æ†¾), `[surprise]` (æƒŠè®¶), `[fear]` (æ‹…å¿§/ç´§å¼ )ã€‚
    3.  **ç»“æ„æ¸…æ™°**ï¼šå›ç­”é—®é¢˜æ—¶é€»è¾‘æ¸…æ™°ã€‚
    4.  **ä¸é‡‡ç”¨markdownè¯­æ³•**ï¼šè¯·å‹¿ä½¿ç”¨ä»»ä½•markdownçš„è¯­æ³•ï¼Œå¦‚**ç²—ä½“**ã€`ä»£ç å—`ã€åˆ—è¡¨ç­‰ã€‚

  # ================= æ ¸å¿ƒï¼šå¤§è„‘ (LLM) è®¾ç½® =================
  agent_config:
    conversation_agent_choice: 'basic_memory_agent'
    
    agent_settings:
      basic_memory_agent:
        llm_provider: 'openai_compatible_llm'
        faster_first_response: true
        segment_method: 'regex'
        use_mcpp: False
        mcp_enabled_servers: ["time", "ddg-search"]

    llm_configs:
      # OpenAI å…¼å®¹æ¨ç†åç«¯ (é­”æ­ä¸“ç”¨é…ç½®)
      openai_compatible_llm:
        #  é­”æ­çš„å®˜æ–¹å…¼å®¹æ¥å£åœ°å€
        base_url: 'https://api-inference.modelscope.cn/v1'
        llm_api_key: 'ms-2c64da2e-1a9e-4420-b7a5-0064b33a2de9' 
        model: 'Qwen/Qwen2.5-7B-Instruct' 
        temperature: 0.7 
        max_tokens: 200 # é™åˆ¶å›å¤é•¿åº¦
        interrupt_method: 'user'

  # ================= è€³æœµ (ASR è¯­éŸ³è¯†åˆ«) =================
  asr_config:
    asr_model: 'sherpa_onnx_asr'
    
    sherpa_onnx_asr:
      model_type: 'sense_voice'
      sense_voice: './models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17/model.int8.onnx'
      tokens: './models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17/tokens.txt'
      num_threads: 4
      provider: 'cpu'
      use_itn: true

  # ================= å˜´å·´ (TTS è¯­éŸ³åˆæˆ) =================
  tts_config:
    tts_model: 'siliconflow_tts'

    modelscope_tts:
      api_key: 'ms-2c64da2e-1a9e-4420-b7a5-0064b33a2de9'  # å’Œ LLM ç”¨åŒä¸€ä¸ª
      model: 'sambert-zhichu-v1'  # ä¸­æ–‡ç”·å£°
      voice: 'zhichu'
      sample_rate: 16000
      format: 'wav'

    siliconflow_tts:
      api_url: "https://api.siliconflow.cn/v1/audio/speech"
      api_key: "sk-wzwhrnutkifudasgafbpslfsxmsnjfeqofmfwsaasnykxbll"
      default_model: "FunAudioLLM/CosyVoice2-0.5B"
      default_voice: "FunAudioLLM/CosyVoice2-0.5B:claire" 
      sample_rate: 32000
      response_format: "mp3"
      stream: true
      speed: 1
      gain: 0

  # ================= è¾…åŠ©åŠŸèƒ½ =================
  vad_config:
    vad_model: 'silero_vad'
    silero_vad:
      orig_sr: 16000
      target_sr: 16000
      prob_threshold: 0.4
      db_threshold: 60
      required_hits: 3
      required_misses: 24
      smoothing_window: 5

  tts_preprocessor_config:
    remove_special_char: true
    ignore_brackets: true
    translator_config:
      translate_audio: false
      translate_provider: 'deeplx'
      deeplx:
        deeplx_target_lang: 'JA'
        deeplx_api_endpoint: 'http://localhost:1188/v2/translate'
      tencent:
        secret_id: ''
        secret_key: ''
        region: 'ap-guangzhou'
        source_lang: 'zh'
        target_lang: 'ja'

  live_config:
    bilibili_live:
      room_ids: [1991478060]
      sessdata: ""